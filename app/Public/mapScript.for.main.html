//put this in main.html have it replace the existing script. 


<script>
      var map;
      function initMap() {
        map = new google.maps.Map(document.getElementById('map'), {
            zoom: 2,
            center: new google.maps.LatLng(23, 15),
            //icon: iconBase,
            mapTypeId: 'roadmap'
          });
        
        function runTableQuery() {
        var currentURL = window.location.origin;

        $.ajax({ url: 
          currentURL + "/api/ips", 
          method: "GET" 
        }).then(function(dbIP) { 
           
          var newArr = dbIP.map(ipInfo => {
            var obj = {};
            obj.lat = ipInfo.longitude;
            obj.long = ipInfo.latitude;
            return obj;
          });

          console.log('newArr: ', newArr);

          //if we find solution for this icon problem we can use the wolfIcon
          var wolfIcon = "assets/images/gt_favicon.png";
          var xIcon = "http://maps.google.com/mapfiles/kml/pal4/icon49.png";  
          // Create markers.
          var pins = newArr.map(el => {
            var marker = new google.maps.Marker({
              position : new google.maps.LatLng(el.lat,el.long),
              icon: xIcon,
              map: map
            });
            return marker;
          });
         console.log('pins: ', pins); 
          
        });
    }
    runTableQuery(); 

}
    </script>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA5gRfzy1tvQrvG8QEab2h17d50bhkEpOk&callback=initMap">
    </script>